<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" th:href="@{css/listarEmpresas.css}" />
    <script defer="defer" th:src="@{/js/empresa.js}"></script> 
    <link rel="icon" th:href="@{/imgs/logoRD.png}">
    <title>Lista de Empresas</title>
   </head>

<body>

    <main>
        <div class="title">
            <img th:src="@{/imgs/logoRD.png}" width="10%" height="10%" alt="" />
            <!-- <h1>RESSOCIADIGI</h1> -->
        </div>
        <div class="top-layer">
            <legend>TODOS</legend>
        </div>
        <div class="header-tabela">
        	<form action="#" th:action="@{/buscarEmpresa}" th:object="${busca}" method="post">
	            <div class="buscador">
	            	<select id="select-tipoBusca" th:field="*{tipoBusca}">
	            		<option value="CNPJ">CNPJ</option>
	            		<option value="NOME DA EMPRESA">NOME DA EMPRESA</option>
	            		<option value="RESPONSÁVEL">RESPONSÁVEL</option>
	            		<option value="INTERLOCUTOR">INTERLOCUTOR</option>
	            		<option value="TELEFONE">TELEFONE</option>
	            		<option value="EMAIL">EMAIL</option>
	            		<option value="CIDADE">CIDADE</option>
	            		<option value="ESTADO">ESTADO</option>
	            	</select>
	                <input type="search" placeholder="Buscar" id="nome" th:field="*{valorBusca}" />
	                <!-- Funcionalidade de busca ainda em teste!! -->
	                <a><button id="buscar">Buscar</button></a>
	            
	        	</div>
			</form>
            <a th:href="@{/inserirEmpresa}"><button class="AdicionarEmpresa">+</button></a>
			
        </div>
        <table>
            <thead>
                <tr>
                    <th>CNPJ</th>
                    <th>NOME DA EMPRESA</th>
                    <th>RESPONSÁVEL</th>
                    <th>INTERLOCUTOR</th>
                    <th>TELEFONE</th>
                    <th>EMAIL</th>
                    <th>CIDADE</th>
                    <th>AÇÕES</th>
                </tr>
            </thead>
            
            <tbody>
             
            	<tr th:if="${listaEmpresas.empty}">
            		<td colspan="10">Não há empresas registradas no sistema.</td>
            	</tr>
                <tr th:each="empresa : ${listaEmpresas}">
                    <td data-label="CNPJ"><span th:text="${empresa.cnpj}">CNPJ</span></td>
                    <td data-label="NOME DA EMPRESA"><span th:text="${empresa.nome}">Nome</span></td>
                    <td data-label="RESPONSÁVEL"><span th:text="${empresa.responsavel}">Responsável</span></td>
                    <td data-label="INTERLOCUTOR"><span th:text="${empresa.interlocutor}">Interlocutor</span></td>
                    <td data-label="TELEFONE"><span th:text="${empresa.telefone}">Telefone</span></td>
                    <td data-label="E-MAIL"><span th:text="${empresa.email}">Email</span></td>
                    <td data-label="CIDADE"><span th:text="${empresa.cidade}">Cidade</span></td>
                    <td id="Btn-remove-edit">
                        <a th:href="@{/alterarEmpresa(cnpj=${empresa.cnpj})}"><button>Editar</button></a>
                        <a th:href="@{/removerEmpresa(cnpj=${empresa.cnpj})}"><button>Remover</button></a>
                    </td>
                </tr>
          	</tbody>
          	<tfoot>
	        	<tr>
	        		<td colspan="6"></td>
	        		<td><span id="spanQtdPaginas" th:text="${pageCounter}"></span></td>
	        		<td id="previousAndNextButtons">
	        		</td>
	        	</tr>
		    </tfoot>     
             <tfoot>
                
             </tfoot>  
        </table>
    </main>
</body>
	<script defer="defer">
    	let tdPreviousAndNextButtons = document.querySelector("#previousAndNextButtons");
    	let spanQtdPaginas = document.querySelector("#spanQtdPaginas");
		let quantidadePaginas = "[[${quantidadePaginas}]]";
		function createElements(){
			for(let i = 1; i <= quantidadePaginas; i++){
				let a = document.createElement("a");
				a.text=i
				a.id=i
				a.href="?page=" + (i-1)
					
				tdPreviousAndNextButtons.appendChild(a);
			}
		}
		
		createElements();
	</script> 

   
</html>