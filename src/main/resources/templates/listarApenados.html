<!DOCTYPE HTML>
<html xmlns:th="https://www.thymeleaf.org">
<!--teste -->

<head>
    <title>Lista de Apenados</title>
    <meta charset="UTF-8" />
    <link rel="stylesheet" th:href="@{css/listarEmpresas.css}" />
    <script defer="defer" th:src="@{/js/result.js}"></script>
    <link rel="icon" th:href="@{/imgs/logoRD.png}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.7.0.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
    <!-- Bootstrap Font Icon CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">

</head>

<body>

    <main>
        <div class="title">
            <a th:href="@{http://localhost:8080}">
                <h1>RessociaDigi</h1>
                <hr>
                <!--Alterado dia 27/04/2023-->
            </a>
        </div>
        <div class="top-layer">
            <h3>Apenados</h3>
        </div>



        <div class="header-tabela">

            <div class="buscador">
               <button id="icone-filtro" type="button" class="botao-filtro laranja">Filtrar</button>
            </div>

            <a th:href="@{/inserirApenado}">
                <button type="button" class="botao-cadastro laranja">Cadastrar Apenado</button>
            </a>

        </div>

        <div class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <!-- Add your modal content here -->
                <div id="titleContainer">
                    <h2>Busca Personalizada</h2>
                    <h1><span>Preenchimento de todos os filtros não é necessário</span></h1>
                </div>
                <!-- Update the form element with the correct method and action -->
                <div id="containerModalFiltro">
                    <form method="post" action="/listarApenados">

                        <ul class="flex-outer">
                            <!-- Remove the hidden input fields for form parameters, as they will be sent as request parameters automatically -->

                            <!-- Add your search form fields here -->
                            <li>
                                <label for="cpf">CPF</label>
                                <input type="text" id="cpf" name="cpf" />
                            </li>

                            <li>
                                <label for="nome">Nome</label>
                                <input type="text" id="nome" name="nome" />
                            </li>

                            <li>
                                <label for="telefone">Telefone</label>
                                <input type="text" id="telefone" name="telefone" />
                            </li>

                            <li>
                                <label for="dataNascimento">Data Nascimento</label>
                                <input type="date" id="dataNascimento" name="dataNascimento" pattern="\d{4}\-\d{2}\-\d{2}" />
                            </li>

                            <li>
                                <label for="nomeDaMae">Nome da Mãe</label>
                                <input type="text" id="nomeDaMae" name="nomeDaMae" />
                            </li>

                            <li>
                                <button type="submit">Buscar</button>
                            </li>
                        </ul>
                    </form>
                </div>
            </div>
        </div>

        <table>
            <thead>
                <tr>
                    <th>NOME</th>
                    <th>CPF</th>
                    <th>DATA DE NASCIMENTO</th>
                    <th>TELEFONE</th>
                    <th>NOME DA MAE</th>
                    <th>HABILIDADES</th>
                    <th>ARTIGOS</th>
                    <th>AÇÕES</th>
                </tr>
            </thead>

            <tbody>

                <tr th:if="${lista.empty}">
                    <td colspan="8">Nenhum registro armazenado.</td>
                </tr>
                <tr th:each="item : ${lista}">
                    <td data-label="NOME"><span id="nome" th:text="${item.nome}">Nome</span></td>
                    <td data-label="CPF"><span id="cpf" th:text="${item.cpf}">CPF</span></td>
                    <td data-label="DATA DE NASCIMENTO"><span id="dataNascimento" th:text="${item.dataNascimento}">Data de Nascimento</span></td>
                    <td data-label="CONTATO"><span id="contato" th:text="${item.telefone}">Contato</span></td>
                    <td data-label="NOME MÃE"><span id="nomeMae" th:text="${item.nomeDaMae}">Nome da Mãe</span></td>
                    <td data-label="HABILIDADES"><span id="habilidades" th:text="${item.habilidades}">Habilidades</span></td>
                    <td data-label="ARTIGOS"><span id="artigos" th:text="${item.artigos}">Artigos</span></td>
                    <td id="Btn-remove-edit" width="180">
                        <a th:href="@{/alterarApenado(cpf=${item.cpf})}"><button>Editar</button></a>
                        <a id="botao-remover" href="#" th:attr="data-nome=${item.nome}, data-cpf=${item.cpf}" data-toggle="modal" data-target="#confirmModal"><button>Remover</button></a>
                    </td>
                </tr>
            </tbody>
        </table>

        <div id="confirmModal" class="modal fade" role="dialog">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header justify-content-center">
                        <h4 class="modal-title">Confirmar exclusão</h4>
                    </div>
                    <div class="modal-body">
                        <p>Você tem certeza que deseja excluir o apenado <strong><span id="confirmNome"></span></strong>?</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-bs-dismiss="modal">Cancelar</button>
                        <a id="botao-confirmar-remover" href="#" class="btn btn-danger">Excluir</a>
                    </div>
                </div>
            </div>
        </div>

        <div id="footer">
            <div class="botao-container">
                <a th:href="@{http://localhost:8080}" ><button type="button" class="botao-filtro laranja">Voltar</button></a>
            </div>

            <div id="pagination">
                <div id="pageCounter" class="text-center">
                    <p th:text="${'Pagina ' + numPaginaAtual + ' de ' + numTotalPaginas}"> </p>
                </div>

                <div id="previousAndNextButtons">
                    <a th:href="@{/listarApenados(cpf=${#httpServletRequest.getParameter('cpf')?:''},nome=${#httpServletRequest.getParameter('nome')?:''},telefone=${#httpServletRequest.getParameter('telefone')?:''},dataNascimento=${#httpServletRequest.getParameter('dataNascimento')?:''},nomeDaMae=${#httpServletRequest.getParameter('nomeDaMae')?:''},page=0)}">
                        <button type="button" class="botao-paginacao laranja"><<</button>
                    </a>
                    <a class="a" th:href="@{/listarApenados(cpf=${#httpServletRequest.getParameter('cpf')?:''},nome=${#httpServletRequest.getParameter('nome')?:''},telefone=${#httpServletRequest.getParameter('telefone')?:''},dataNascimento=${#httpServletRequest.getParameter('dataNascimento')?:''},nomeDaMae=${#httpServletRequest.getParameter('nomeDaMae')?:''},page=${previousPage})}">
                        <button type="button" class="botao-paginacao laranja"><</button>
                    </a>
                    <a th:href="@{/listarApenados(cpf=${#httpServletRequest.getParameter('cpf')?:''},nome=${#httpServletRequest.getParameter('nome')?:''},telefone=${#httpServletRequest.getParameter('telefone')?:''},dataNascimento=${#httpServletRequest.getParameter('dataNascimento')?:''},nomeDaMae=${#httpServletRequest.getParameter('nomeDaMae')?:''},page=${nextPage})}">
                        <button type="button" class="botao-paginacao laranja">></button>
                    </a>
                    <a th:href="@{/listarApenados(cpf=${#httpServletRequest.getParameter('cpf')?:''},nome=${#httpServletRequest.getParameter('nome')?:''},telefone=${#httpServletRequest.getParameter('telefone')?:''},dataNascimento=${#httpServletRequest.getParameter('dataNascimento')?:''},nomeDaMae=${#httpServletRequest.getParameter('nomeDaMae')?:''},page=${quantidadePaginas - 1})}">
                        <button type="button" class="botao-paginacao laranja">>></button>
                    </a>
                </div>
            </div>
        </div>

    </main>
</body>

</html>